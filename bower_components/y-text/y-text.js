!function e(t,n,r){function i(l,u){if(!n[l]){if(!t[l]){var f="function"==typeof require&&require;if(!u&&f)return f(l,!0);if(o)return o(l,!0);var a=new Error("Cannot find module '"+l+"'");throw a.code="MODULE_NOT_FOUND",a}var s=n[l]={exports:{}};t[l][0].call(s.exports,function(e){var n=t[l][1][e];return i(n?n:e)},s,s.exports,e,t,n,r)}return n[l].exports}for(var o="function"==typeof require&&require,l=0;l<r.length;l++)i(r[l]);return i}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){e.requestModules(["Array"]).then(function(){var t=function(e){function t(e,n,o,l){r(this,t);var u=i(this,Object.getPrototypeOf(t).call(this,e,n,o,l));return u.textfields=[],u}return o(t,e),u(t,[{key:"toString",value:function(){return this.valArray.join("")}},{key:"insert",value:function(e,n){f(Object.getPrototypeOf(t.prototype),"insert",this).call(this,e,n.split(""))}},{key:"bind",value:function(e,t){t=t||window,null==t.getSelection&&(t=window);for(var n in this.textfields)if(this.textfields[n]===e)return;var r=!1,i=this;e.value=this.toString(),this.textfields.push(e);var o,l,u;null!=e.selectionStart&&null!=e.setSelectionRange?(o=function(t){var n=e.selectionStart,r=e.selectionEnd;return null!=t&&(n=t(n),r=t(r)),{left:n,right:r}},l=function(t){u(i.toString()),e.setSelectionRange(t.left,t.right)},u=function(t){e.value=t}):(o=function(n){var r={},i=t.getSelection(),o=e.textContent.length;r.left=Math.min(i.anchorOffset,o),r.right=Math.min(i.focusOffset,o),null!=n&&(r.left=n(r.left),r.right=n(r.right));var l=i.focusNode;return l===e||l===e.childNodes[0]?r.isReal=!0:r.isReal=!1,r},l=function(t){u(i.toString());var n=e.childNodes[0];if(t.isReal&&null!=n){t.left<0&&(t.left=0),t.right=Math.max(t.left,t.right),t.right>n.length&&(t.right=n.length),t.left=Math.min(t.left,t.right);var r=document.createRange();r.setStart(n,t.left),r.setEnd(n,t.right);var o=window.getSelection();o.removeAllRanges(),o.addRange(r)}},u=function(t){var n=t.replace(new RegExp("\n","g")," ").split(" ");e.innerText="";for(var r in n){var i=n[r];e.innerText+=i,r!==n.length-1&&(e.innerHTML+="&nbsp;")}}),u(this.toString()),this.observe(function(e){for(var t in e){var n=e[t];if(!r){var i,u;if("insert"===n.type){i=n.index,u=function(e){return i>=e?e:e+=1};var f=o(u);l(f)}else"delete"===n.type&&(i=n.index,u=function(e){return i>e?e:e-=1},f=o(u),l(f))}}}),e.onkeypress=function(t){if(i.is_deleted)return e.onkeypress=null,!0;r=!0;var n;if(n=13===t.keyCode?"\n":null!=t.key?32===t.charCode?" ":t.key:window.String.fromCharCode(t.keyCode),n.length>1)return!0;if(n.length>0){var u=o(),f=Math.min(u.left,u.right,i.length),a=Math.abs(u.right-u.left);i["delete"](f,a),i.insert(f,n),u.left=f+n.length,u.right=u.left,l(u)}return t.preventDefault(),r=!1,!1},e.onpaste=function(t){return i.is_deleted?(e.onpaste=null,!0):void t.preventDefault()},e.oncut=function(t){return i.is_deleted?(e.oncut=null,!0):void t.preventDefault()},e.onkeydown=function(t){if(r=!0,i.is_deleted)return e.onkeydown=null,!0;var n=o(),u=Math.min(n.left,n.right,i.toString().length),f=Math.abs(n.left-n.right);if(null!=t.keyCode&&8===t.keyCode){if(f>0)i["delete"](u,f),n.left=u,n.right=u,l(n);else if(null!=t.ctrlKey&&t.ctrlKey){var a=i.toString(),s=u,c=0;for(u>0&&(s--,c++);s>0&&" "!==a[s]&&"\n"!==a[s];)s--,c++;i["delete"](s,u-s),n.left=s,n.right=s,l(n)}else u>0&&(i["delete"](u-1,1),n.left=u-1,n.right=u-1,l(n));return t.preventDefault(),r=!1,!1}return null!=t.keyCode&&46===t.keyCode?(f>0?(i["delete"](u,f),n.left=u,n.right=u,l(n)):(i["delete"](u,1),n.left=u,n.right=u,l(n)),t.preventDefault(),r=!1,!1):(r=!1,!0)}}}]),t}(e.Array["class"]);e.extend("Text",new e.utils.CustomType({name:"Text","class":t,struct:"List",initType:regeneratorRuntime.mark(function n(r,i){var o,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=[],n.delegateYield(e.Struct.List.map.call(this,i,function(e){return o.push(e.content),JSON.stringify(e.id)}),"t0",2);case 2:return l=n.t0,n.abrupt("return",new t(r,i.id,l,o));case 4:case"end":return n.stop()}},n,this)})}))})}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function a(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:a(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};t.exports=l,"undefined"!=typeof Y&&l(Y)},{}]},{},[1]);
//# sourceMappingURL=y-text.js.map
